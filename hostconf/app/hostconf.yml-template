__defs__:
  config_ua: &config_ua
    config: "unattend"

  config_ci: &config_ci
    config: "cloudinit"

  ansible_url: &ansible_url
    ansible_notify: ansible.servers.ils.bayern.de

  debian_sda: &debian_sda
    <<: *config_ci
    run_cmds: []
    install: "nfs://192.168.234.233:/srv/nfs/Debian12UEFI.raw"
    install_to: /dev/sda
    root_hash: $6$sEmXOpZIRo$AmpDOYOQmUUPmGyESlpzcG2vLoHHjr1chD9AXKwz.F6h82Jh3HiUGt4kojnOIyBPlWWI8KM3wvlTqmzhZNyvo.

  alma_generic_sda: &alma_generic_sda
    <<: *config_ci
    run_cmds: []
    install: "nfs://192.168.234.233:/srv/nfs/AlmaLinux-8-GenericCloud-UEFI-8.8-20230524.x86_64.raw"
    install_to: /dev/sda
    root_hash: $6$sEmXOpZIRo$AmpDOYOQmUUPmGyESlpzcG2vLoHHjr1chD9AXKwz.F6h82Jh3HiUGt4kojnOIyBPlWWI8KM3wvlTqmzhZNyvo.

  windows_sda: &windows_sda
    <<: *config_ua
    run_cmds: []
    install: "nfs://192.168.234.233:/srv/nfs/Windows10UEFI.raw"
    install_to: /dev/sda
    root_hash: 209c6174da490caeb422f3fa5a7ae634 # admin

  default_routes: &default_routes
    routes:
      - to: "0.0.0.0/0"
        via: "192.168.234.254"

  windows_users: &windows_users
    users:
      ansible:
        gecos: 'Ansible System User'
        passwd: 209c6174da490caeb422f3fa5a7ae634
        lock_passwd: false
        primary_group: Administratoren

  default_users: &default_users
    users:
      ansible:
        gecos: 'Ansible System User'
        ssh_keys:
          - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQCunNO9B/M9wsydz/jUbm3nFmZHu85SsFkwvX+xg6heF93ssBgjYpKtJfkpPSZwX8O5Jdosn9NhjgxZ0AoG7sIjOLkbvrHUPHD/qhmWhR3/EhlGaZOVwLZi1rYZbkhIY9Skbbto+OPZw/0ZNcQ5hPubx+Fni4wFUM2dAd6Qcph9532untX1VvHlhniq4TMJ8omO3vLFd2WbpjR4lbOXR9YjbenNFuF7OVOCeFfm0ibXyw+H5GxzxQ8fmCSt1zbCjYqFdnBnNtqGlDiKTABGD8Goo4kYnxlUnIbRBtO2vdQJEi22h7OdqlagItW0UricIipgp9/WWhTMNybvM2i6YtqEPT0CCtaOS14kzXZsIXzKEPkEHJSZZ0NHXzW4OxfkrShv8R45WuKxwP9KcRL6QXkwSFWwy3Sa/67Za+i0RG0mlnw6+dY3Lq3uf+yy2i5lxNjpujcaPzP/UkBKiY6X7pXQo5sFCWbB2lU6X5vb+TAQXMd7pjzBQHXBdLDY45/540jNglX5T3Wt+O0K+lpBRtDMTEK3HHfU8X7VOLlLszN6tRnEU+qHhehBRp4XnFNnEBtI7jLJfDM6qUH4/MLkhoLL1XNnv6GF8xzOPnYbQV6udNJ2gclHi2P5LSzY7y5/d+TKlFlYOzaD3J+zJo1dswrl80Jp5iloGHon4Bp+bWpGXw==
        sudo: yes
        uid: 1001
        passwd: $6$rounds=4096$pZ1MeqCqNWBl7T5u$x7LMB7PJAqvQfqL8yv/p1Ma9OQnB7xG2VfzVhQVQvyhnNz8kYmXxOUb5r5fW.xaUTqoF2hWaCoZopEh/p/KM90 # ansible
        shell: /bin/bash
        primary_group: ansible
        lock_passwd: yes
        groups:
          - wheel
          - adm

  default_groups: &default_groups
    groups:
      - ansible

hosts:
  - name: mywindowsclient
    <<: *windows_sda
    interfaces:
      Ethernet:
        mac: "ee:4a:6a:a1:04:40"
        dhcp: true
    <<: *windows_user
    <<: *default_groups

  - name: myhostname
    <<: *windows_sda
    interfaces:
      Ethernet:
        mac: "ee:4a:6a:a1:04:47"
        addresses:
          - 192.168.234.244/24
        <<: *default_routes
    <<: *windows_user
    <<: *default_groups

  - name: myhostname
    <<: *debian_sda
    interfaces:
      eth0:
        mac: "ee:4a:6a:a1:04:49"
        addresses:
          - 192.168.234.249/24
        <<: *default_routes
    <<: *default_users
    <<: *default_groups
